<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMARTPAT - ìŠ¤ë§ˆíŠ¸ ë³´ì • í”Œë«í¼</title>
    
    <!-- ë©”íƒ€íƒœê·¸ -->
    <meta name="description" content="SMARTPAT - ë³€ë¦¬ì‚¬ë¥¼ ìœ„í•œ ìŠ¤ë§ˆíŠ¸ ë³´ì • í”Œë«í¼. ë³´ì •ì´ë ¥ ê²€ì¦ê³¼ ì²­êµ¬í•­ ì ê²€.">
    <meta name="keywords" content="SMARTPAT, ìŠ¤ë§ˆíŠ¸ë³´ì •, ë³´ì •ì„œ, ì²­êµ¬í•­ì ê²€, ë³€ë¦¬ì‚¬, íŠ¹í—ˆ">
    <meta name="author" content="SMARTPAT">
    <meta property="og:title" content="SMARTPAT - ìŠ¤ë§ˆíŠ¸ ë³´ì • í”Œë«í¼">
    <meta property="og:description" content="ë³€ë¦¬ì‚¬ë¥¼ ìœ„í•œ AI ê¸°ë°˜ ë³´ì •ì„œ ì‘ì„±ê³¼ ì²­êµ¬í•­ ì ê²€ ë„êµ¬">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://smartpat.co.kr">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="SMARTPAT - ìŠ¤ë§ˆíŠ¸ ë³´ì • í”Œë«í¼">
    <meta name="twitter:description" content="ë³€ë¦¬ì‚¬ë¥¼ ìœ„í•œ ìŠ¤ë§ˆíŠ¸ ë³´ì • ë„êµ¬">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âš¡</text></svg>">
    
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1E3A8A 0%, #3B82F6 50%, #60A5FA 100%);
            color: #333;
            height: 100vh;
            overflow: hidden;
            font-size: 13px;
            position: relative;
        }

        /* ë°°ê²½ í”Œë¡œìš° í™”ì‚´í‘œ */
        body::before {
            content: '';
            position: absolute;
            top: 15%;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 600px;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 200'%3E%3Cpath d='M50 10 L50 160 M35 145 L50 160 L65 145' stroke='rgba(255,255,255,0.08)' stroke-width='3' fill='none' stroke-linecap='round'/%3E%3Ctext x='50' y='180' text-anchor='middle' fill='rgba(255,255,255,0.1)' font-size='8' font-family='system-ui'%3Eì—…ë¡œë“œ â†’ í…Œì´ë¸” â†’ í¸ì§‘%3C/text%3E%3C/svg%3E") no-repeat center;
            background-size: contain;
            z-index: 2;
            pointer-events: none;
        }

        body::after {
            content: '';
            position: absolute;
            bottom: -30%;
            left: -10%;
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, rgba(255,255,255,0.04) 0%, transparent 70%);
            border-radius: 50%;
            z-index: 1;
        }
        
        .app-container {
            height: 100vh;
            display: flex;
            flex-direction: column;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            position: relative;
            z-index: 10;
        }
        
        /* ìƒë‹¨ í—¤ë” - ìŠ¬ë¦¼í™” */
        .app-header {
            background: linear-gradient(135deg, #1E3A8A 0%, #3B82F6 100%);
            color: white;
            padding: 18px 30px;
            position: relative;
            box-shadow: 0 4px 20px rgba(30, 58, 138, 0.2);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .app-branding {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .app-title {
            font-size: 28px;
            font-weight: 700;
            color: white;
            margin: 0;
            letter-spacing: -0.5px;
        }
        
        .app-subtitle {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.85);
            font-weight: 500;
            margin: 0;
        }

        /* í—¤ë” ì»¨íŠ¸ë¡¤ ë²„íŠ¼ë“¤ */
        .header-controls {
            display: flex;
            gap: 12px;
            z-index: 100;
        }

        .header-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 400;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .header-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .logout-btn {
            background: rgba(107, 114, 128, 0.8);
            border-color: rgba(107, 114, 128, 0.8);
        }

        .logout-btn:hover {
            background: rgba(107, 114, 128, 1);
            border-color: rgba(107, 114, 128, 1);
        }
        
        /* ë©”ì¸ ì»¨í…ì¸  */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        /* ì…ë ¥ ì˜ì—­ */
        .input-section {
            background: white;
            padding: 25px 30px;
            border-bottom: 1px solid #e5e7eb;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        .input-section.collapsed {
            padding: 12px 30px;
        }

        /* ë‹¨ê³„ë³„ ê°€ì´ë“œë¥¼ ìƒë‹¨ìœ¼ë¡œ ì´ë™ */
        .step-guide-top {
            display: flex;
            gap: 12px;
            padding: 12px 20px;
            background: rgba(59, 130, 246, 0.1);
            border-radius: 25px;
            font-size: 12px;
            color: #1E3A8A;
            font-weight: 600;
            margin-bottom: 20px;
            justify-content: center;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .step-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .step-number {
            width: 20px;
            height: 20px;
            background: linear-gradient(135deg, #3B82F6, #1E3A8A);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 700;
        }
        
        .input-content {
            max-width: 900px;
            margin: 0 auto;
            position: relative;
            display: flex;
            gap: 30px;
            align-items: center;
        }
        
        .input-text-area {
            flex: 2;
            max-width: 600px;
        }
        
        .input-buttons-area {
            flex: 0 0 auto;
            display: flex;
            flex-direction: column;
            gap: 16px;
            min-width: 160px;
            max-width: 160px;
            position: relative;
        }
        
        .input-content.collapsed {
            display: none;
        }
        
        .input-area {
            width: 100%;
            height: 300px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 16px;
            font-size: 13px;
            resize: none;
            transition: all 0.3s ease;
            background: white;
            font-family: inherit;
            line-height: 1.6;
            margin-bottom: 12px;
        }
        
        .input-area:focus {
            outline: none;
            border-color: #3B82F6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            transform: translateY(-1px);
        }
        
        .input-area::placeholder {
            color: #9CA3AF;
            font-style: normal;
        }
        
        /* ì§„í–‰ë¥  ë°” ìˆ¨ê¹€ */
        .file-status {
            display: none;
        }
        
        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
            width: 100%;
        }
        
        .file-input {
            display: none;
        }
        
        .file-btn {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            color: #6B7280;
            border: 2px solid #e5e7eb;
            padding: 14px 16px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 400;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            text-align: center;
        }
        
        .file-btn:hover {
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            border-color: #cbd5e1;
            color: #475569;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .generate-btn {
            background: linear-gradient(135deg, #3B82F6 0%, #1E3A8A 100%);
            color: white;
            border: none;
            padding: 14px 20px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 400;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
            text-align: center;
        }
        
        .generate-btn:hover {
            background: linear-gradient(135deg, #1E3A8A 0%, #1E40AF 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
        }
        
        /* íˆ´ë°” - ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€ */
        .toolbar {
            display: none;
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-bottom: 1px solid #e5e7eb;
            padding: 16px 30px;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        /* íˆ´ë°”ê°€ ë³´ì¼ ë•Œ */
        .toolbar.show {
            display: flex;
        }
        
        .toolbar-left {
            display: none;
        }
        
        .toolbar-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .toolbar-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .toolbar-input {
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 8px 12px;
            font-size: 13px;
            width: 120px;
            background: white;
            transition: all 0.3s ease;
        }
        
        .toolbar-input:focus {
            outline: none;
            border-color: #3B82F6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .toolbar-btn {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            color: #475569;
            border: 1px solid #e2e8f0;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 400;
            white-space: nowrap;
            transition: all 0.3s ease;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .toolbar-btn:hover {
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            transform: translateY(-1px);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
        }
        
        .toolbar-btn.primary {
            background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%);
            color: white;
            border: none;
            box-shadow: 0 2px 6px rgba(59, 130, 246, 0.3);
        }
        
        .toolbar-btn.primary:hover {
            background: linear-gradient(135deg, #2563EB 0%, #1D4ED8 100%);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }
        
        .toolbar-btn.success {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            color: white;
            border: none;
            box-shadow: 0 2px 6px rgba(5, 150, 105, 0.3);
        }
        
        .toolbar-btn.success:hover {
            background: linear-gradient(135deg, #047857 0%, #065F46 100%);
            box-shadow: 0 4px 12px rgba(5, 150, 105, 0.4);
        }

        .toolbar-btn.special {
            background: linear-gradient(135deg, #7C3AED 0%, #5B21B6 100%);
            color: white;
            border: none;
            box-shadow: 0 3px 12px rgba(124, 58, 237, 0.4);
            position: relative;
            overflow: hidden;
            font-weight: 400;
        }

        .toolbar-btn.special::before {
            content: 'â­';
            position: absolute;
            top: -2px;
            right: -2px;
            font-size: 12px;
            animation: sparkle 2s infinite;
        }

        .toolbar-btn.special:hover {
            background: linear-gradient(135deg, #5B21B6 0%, #4C1D95 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(124, 58, 237, 0.5);
        }

        @keyframes sparkle {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.2); }
        }
        
        .toolbar-btn.warning {
            background: linear-gradient(135deg, #D97706 0%, #B45309 100%);
            color: white;
            border: none;
            box-shadow: 0 2px 6px rgba(217, 119, 6, 0.3);
        }
        
        .toolbar-btn.warning:hover {
            background: linear-gradient(135deg, #B45309 0%, #92400E 100%);
            box-shadow: 0 4px 12px rgba(217, 119, 6, 0.4);
        }
        
        .toolbar-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .toolbar-separator {
            color: #cbd5e1;
            margin: 0 8px;
            font-size: 14px;
        }
        
        /* í…Œì´ë¸” ì˜ì—­ - ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€ */
        .table-section {
            display: none;
            flex: 1;
            overflow: hidden;
            background: white;
            margin: 20px 30px 30px 30px;
            border: 1px solid #e5e7eb;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
        }
        
        /* í…Œì´ë¸”ì´ ë³´ì¼ ë•Œ */
        .table-section.show {
            display: flex;
            flex-direction: column;
        }
        
        .table-container {
            height: 100%;
            overflow: auto;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }
        
        .comparison-table th {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            color: #374151;
            padding: 16px 12px;
            text-align: center;
            border-bottom: 2px solid #e5e7eb;
            position: sticky;
            top: 0;
            z-index: 10;
            font-weight: 700;
            font-size: 13px;
        }
        
        .comparison-table td {
            padding: 12px;
            border-bottom: 1px solid #f3f4f6;
            vertical-align: top;
            line-height: 1.6;
        }
        
        .paragraph-num {
            width: 80px;
            text-align: center;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            font-weight: 700;
            color: #6B7280;
            cursor: pointer;
            font-size: 12px;
            border-right: 1px solid #e5e7eb;
        }
        
        .paragraph-num:hover {
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            color: #374151;
        }
        
        .text-cell {
            width: calc(50% - 40px);
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 12px 16px;
        }
        
        .text-cell:hover {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        }
        
        .text-cell.editing {
            padding: 0;
        }
        
        .inline-editor {
            width: 100%;
            border: 2px solid #3B82F6;
            border-radius: 8px;
            padding: 12px;
            font-size: 13px;
            line-height: 1.6;
            resize: vertical;
            min-height: 60px;
            font-family: inherit;
            background: white;
        }
        
        .inline-editor:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .edit-buttons {
            margin-top: 8px;
            text-align: right;
            display: flex;
            gap: 8px;
            justify-content: flex-end;
        }
        
        .edit-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .edit-btn.save {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            color: white;
            box-shadow: 0 2px 4px rgba(5, 150, 105, 0.3);
        }

        .edit-btn.save:hover {
            background: linear-gradient(135deg, #047857 0%, #065F46 100%);
            transform: translateY(-1px);
        }
        
        .edit-btn.cancel {
            background: linear-gradient(135deg, #6B7280 0%, #4B5563 100%);
            color: white;
            box-shadow: 0 2px 4px rgba(107, 114, 128, 0.3);
        }

        .edit-btn.cancel:hover {
            background: linear-gradient(135deg, #4B5563 0%, #374151 100%);
            transform: translateY(-1px);
        }
        
        /* í•˜ì´ë¼ì´íŠ¸ íš¨ê³¼ */
        .highlight-change {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            animation: highlight-fade 2s ease-out;
        }
        
        @keyframes highlight-fade {
            0% { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); }
            100% { background: transparent; }
        }
        
        .highlight-search {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            color: #92400e;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 700;
        }
        
        .word-changed {
            color: #dc2626 !important;
            font-weight: 700 !important;
            background: linear-gradient(135deg, #ffeb3b 0%, #fdd835 100%) !important;
            padding: 3px 6px !important;
            border-radius: 4px !important;
        }
        
        .particle-changed {
            color: #dc2626 !important;
            font-weight: 700 !important;
            background: linear-gradient(135deg, #ffeb3b 0%, #fdd835 100%) !important;
            padding: 3px 6px !important;
            border-radius: 4px !important;
            text-decoration: underline;
        }
        
        .word-added {
            color: #059669 !important;
            font-weight: 700 !important;
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%) !important;
            padding: 3px 6px !important;
            border-radius: 4px !important;
        }
        
        .word-deleted {
            color: #dc2626 !important;
            font-weight: 700 !important;
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%) !important;
            padding: 3px 6px !important;
            border-radius: 4px !important;
            text-decoration: line-through;
        }
        
        /* ë¹ˆ ìƒíƒœ */
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: #6B7280;
            padding: 60px 40px;
            position: relative;
        }
        
        .empty-icon {
            font-size: 48px;
            margin-bottom: 20px;
            opacity: 0.7;
            background: linear-gradient(135deg, #3B82F6, #1E3A8A);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .empty-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 12px;
            color: #374151;
        }
        
        .empty-subtitle {
            font-size: 14px;
            text-align: center;
            max-width: 350px;
            line-height: 1.6;
            color: #6B7280;
        }
        
        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 1024px) {
            .toolbar {
                flex-direction: column;
                gap: 12px;
                align-items: center;
            }
            
            .toolbar-right {
                justify-content: center;
                flex-wrap: wrap;
            }

            .input-content {
                flex-direction: column;
                gap: 16px;
            }

            .input-buttons-area {
                min-width: auto;
                max-width: none;
            }

            .action-buttons {
                flex-direction: row;
                gap: 12px;
                justify-content: center;
            }

            .file-btn, .generate-btn {
                flex: 1;
                min-width: 0;
            }
        }
        
        @media (max-width: 768px) {
            .app-header {
                padding: 15px;
                flex-direction: column;
                align-items: center;
                text-align: center;
                gap: 12px;
            }

            .app-branding {
                flex-direction: column;
                gap: 6px;
                text-align: center;
            }

            .header-controls {
                justify-content: center;
            }
            
            .input-section {
                padding: 20px 15px;
            }
            
            .toolbar {
                padding: 15px;
            }
            
            .table-section {
                margin: 15px 15px 20px 15px;
                border-radius: 12px;
            }

            .action-buttons {
                flex-direction: column;
            }

            .toolbar-right {
                gap: 12px;
            }

            .toolbar-group {
                gap: 6px;
            }

            .toolbar-input {
                width: 100px;
            }

            .step-guide-top {
                padding: 8px 12px;
                font-size: 11px;
                gap: 8px;
            }

            .step-number {
                width: 18px;
                height: 18px;
                font-size: 9px;
            }
        }
        
        /* ì»¤ìŠ¤í…€ ìŠ¤í¬ë¡¤ë°” */
        .table-container::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        .table-container::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 4px;
        }
        
        .table-container::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #cbd5e1, #94a3b8);
            border-radius: 4px;
        }
        
        .table-container::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #94a3b8, #64748b);
        }

        /* Firefox ìŠ¤í¬ë¡¤ë°” */
        .table-container {
            scrollbar-width: thin;
            scrollbar-color: #cbd5e1 #f1f5f9;
        }
    </style>

    <!-- Firebase ì¸ì¦ ë³´í˜¸ ìŠ¤í¬ë¦½íŠ¸ -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js';
        import { 
            getAuth, 
            onAuthStateChanged, 
            setPersistence,
            browserSessionPersistence
        } from 'https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js';
        import { 
            getFirestore, 
            doc, 
            getDoc 
        } from 'https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyBbDLYn9SRGXjvUh_SFrlUBX4wYBcdln9k",
            authDomain: "smart-eac10.firebaseapp.com",
            projectId: "smart-eac10",
            storageBucket: "smart-eac10.firebasestorage.app",
            messagingSenderId: "989426802509",
            appId: "1:989426802509:web:c0c70a856810f8b9ac2104",
            measurementId: "G-LT29P3YTT2"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        
        setPersistence(auth, browserSessionPersistence)
          .then(() => {
            console.log('SMARTPAT ì„¸ì…˜ ì„¤ì • ì™„ë£Œ');
          })
          .catch((error) => {
            console.error('ì„¸ì…˜ ì„¤ì • ì˜¤ë¥˜:', error);
          });
        
       function createLoadingOverlay() {    
           const overlay = document.createElement('div');
           overlay.id = 'auth-loading-overlay';
           overlay.style.cssText = `
               position: fixed;
               top: 0;
               left: 0;
               width: 100%;
              height: 100%;
              background: rgba(30, 58, 138, 0.95);
              backdrop-filter: blur(10px);
              display: flex;
              flex-direction: column;
              justify-content: center;
              align-items: center;
            z-index: 10000;
             font-family: 'Segoe UI', sans-serif;
         `;
         
         overlay.innerHTML = `
             <div style="text-align: center; color: white;">
                 <div style="width: 60px; height: 60px; border: 4px solid rgba(255,255,255,0.3); border-top: 4px solid white; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 25px;"></div>
                 <h2 style="color: white; margin-bottom: 12px; font-size: 24px; font-weight: 700;">SMARTPAT</h2>
                 <p style="color: rgba(255,255,255,0.9); font-size: 16px;">ì¸ì¦ í™•ì¸ ì¤‘...</p>
             </div>
             <style>
                 @keyframes spin {
                     0% { transform: rotate(0deg); }
                     100% { transform: rotate(360deg); }
                 }
             </style>
         `;
         
         document.body.appendChild(overlay);
     }

     function removeLoadingOverlay() {
         const overlay = document.getElementById('auth-loading-overlay');
         if (overlay) {
             overlay.remove();
         }
     }

     function redirectToLogin() {
         window.location.href = '/login.html';
     }

     async function checkUserApproval(user) {
         try {
             const userDoc = doc(db, 'users', user.uid);
             const userSnapshot = await getDoc(userDoc);
             
             if (userSnapshot.exists()) {
                 const userData = userSnapshot.data();
                 return userData.status === 'approved';
             }
             return false;
         } catch (error) {
             console.error('ì‚¬ìš©ì ìŠ¹ì¸ ìƒíƒœ í™•ì¸ ì˜¤ë¥˜:', error);
             return false;
         }
     }

     function showPendingApproval() {
         document.body.innerHTML = `
             <div style="
                 min-height: 100vh;
                 display: flex;
                 flex-direction: column;
                 justify-content: center;
                 align-items: center;
                 background: linear-gradient(135deg, #1E3A8A 0%, #3B82F6 100%);
                 font-family: 'Segoe UI', sans-serif;
                 color: white;
                 text-align: center;
                 padding: 2rem;
             ">
                 <div style="
                     background: rgba(255, 255, 255, 0.95);
                     backdrop-filter: blur(20px);
                     color: #333;
                     padding: 3rem;
                     border-radius: 24px;
                     box-shadow: 0 25px 50px rgba(30, 58, 138, 0.3);
                     max-width: 500px;
                     border: 1px solid rgba(255, 255, 255, 0.2);
                 ">
                     <h1 style="color: #1E3A8A; margin-bottom: 1rem; font-size: 28px; font-weight: 700;">SMARTPAT</h1>
                     <h2 style="margin-bottom: 1.5rem; color: #374151;">ìŠ¹ì¸ ëŒ€ê¸° ì¤‘</h2>
                     <p style="margin-bottom: 2rem; line-height: 1.6; color: #6B7280;">
                         ë² íƒ€ í…ŒìŠ¤íŠ¸ ì‹ ì²­ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.<br>
                         ê´€ë¦¬ì ìŠ¹ì¸ í›„ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br><br>
                         ìŠ¹ì¸ ì™„ë£Œ ì‹œ ì´ë©”ì¼ë¡œ ì•Œë¦¼ì„ ë“œë¦´ ì˜ˆì •ì…ë‹ˆë‹¤.
                     </p>
                     <button onclick="window.location.href='/login.html'" style="
                         background: linear-gradient(135deg, #3B82F6 0%, #1E3A8A 100%);
                         color: white;
                         border: none;
                         padding: 12px 24px;
                         border-radius: 12px;
                         font-size: 16px;
                         font-weight: 600;
                         cursor: pointer;
                         transition: all 0.3s;
                         box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
                     " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(59, 130, 246, 0.4)'" 
                        onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(59, 130, 246, 0.3)'">
                         ë‹¤ì‹œ ë¡œê·¸ì¸
                     </button>
                 </div>
             </div>
         `;
     }

     function initializeAuth() {
         createLoadingOverlay();
         
         onAuthStateChanged(auth, async (user) => {
             if (user) {
                 console.log('SMARTPAT ë¡œê·¸ì¸ëœ ì‚¬ìš©ì:', user);
                 
                 const isApproved = await checkUserApproval(user);
                 
                 if (isApproved) {
                     console.log('ìŠ¹ì¸ëœ ì‚¬ìš©ì - SMARTPAT ì„œë¹„ìŠ¤ ì ‘ê·¼ í—ˆìš©');
                     removeLoadingOverlay();
                 } else {
                     console.log('ìŠ¹ì¸ë˜ì§€ ì•Šì€ ì‚¬ìš©ì');
                     showPendingApproval();
                 }
             } else {
                 console.log('ë¡œê·¸ì¸ë˜ì§€ ì•Šì€ ì‚¬ìš©ì - ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸');
                 redirectToLogin();
             }
         });
     }

     if (document.readyState === 'loading') {
         document.addEventListener('DOMContentLoaded', initializeAuth);
     } else {
         initializeAuth();
     }

     // ì „ì—­ auth ê°ì²´ ì„¤ì • (ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì—ì„œ ì‚¬ìš©)
     window.auth = auth;
 </script>
 
</head>
<body>
 <div class="app-container">
     <!-- ìƒë‹¨ í—¤ë” -->
     <header class="app-header">
         <!-- ë¸Œëœë”© ì˜ì—­ -->
         <div class="app-branding">
              <h1 class="app-title">
                <a href="index.html" style="color: inherit; text-decoration: none; cursor: pointer;">SMARTPAT</a>
             </h1>
             <p class="app-subtitle">ìŠ¤ë§ˆíŠ¸ ë³´ì • í”Œë«í¼</p>
         </div>
         
         <!-- í—¤ë” ì»¨íŠ¸ë¡¤ ë²„íŠ¼ë“¤ -->
         <div class="header-controls">
             <button id="toggleInputBtn" class="header-btn">ì ‘ê¸°</button>
             <button id="logoutBtn" class="header-btn logout-btn">ë¡œê·¸ì•„ì›ƒ</button>
         </div>
     </header>
     
     <div class="main-content">
         <!-- ì…ë ¥ ì˜ì—­ -->
         <div class="input-section" id="inputSection">
             <!-- ë‹¨ê³„ë³„ ê°€ì´ë“œë¥¼ ìƒë‹¨ìœ¼ë¡œ ì´ë™ -->
             <div class="step-guide-top">
                 <div class="step-item">
                     <div class="step-number">1</div>
                     <span>íŒŒì¼ ì—…ë¡œë“œ</span>
                 </div>
                 â†’
                 <div class="step-item">
                     <div class="step-number">2</div>
                     <span>ë¹„êµ í…Œì´ë¸” ìƒì„±</span>
                 </div>
                 â†’
                 <div class="step-item">
                     <div class="step-number">3</div>
                     <span>í¸ì§‘ & ë‹¤ìš´ë¡œë“œ</span>
                 </div>
             </div>
             
             <div class="input-content" id="inputContent">
                 <div class="input-text-area">
                     <div class="file-status" id="fileStatus"></div>
                     <textarea class="input-area" id="originalText" 
                     placeholder="ëª…ì„¸ì„œ íŒŒì¼(word, txt)ì„ ì—…ë¡œë“œí•˜ê±°ë‚˜ ë“œë˜ê·¸ì•¤ ë“œëí•˜ì„¸ìš”!"></textarea>
                 </div>
                 
                 <div class="input-buttons-area">
                     <div class="action-buttons">
                         <input type="file" class="file-input" id="fileInput" accept=".docx,.txt">
                         <button class="file-btn" id="fileBtn">ğŸ“ íŒŒì¼ ì—…ë¡œë“œ</button>
                         <button class="generate-btn" id="generateBtn">ë¹„êµ í…Œì´ë¸” ìƒì„±</button>
                     </div>
                 </div>
             </div>
         </div>
         
         <!-- íˆ´ë°” -->
         <div class="toolbar">
             <div class="toolbar-left" id="toolbarMessage">
                 <!-- ë©”ì‹œì§€ ì œê±°ë¨ -->
             </div>
             
             <div class="toolbar-right">
                 <div class="toolbar-group">
                     <input type="text" class="toolbar-input" id="searchInput" placeholder="ì°¾ê¸°">
                     <button class="toolbar-btn primary" id="findBtn">ì°¾ê¸°</button>
                 </div>
                 
                 <span class="toolbar-separator">|</span>
                 
                 <div class="toolbar-group">
                     <input type="text" class="toolbar-input" id="replaceInput" placeholder="ë°”ê¾¸ê¸°">
                     <button class="toolbar-btn success" id="replaceAllBtn">ì¼ê´„ë³€ê²½</button>
                 </div>
                 
                 <span class="toolbar-separator">|</span>
                 
                 <div class="toolbar-group">
                     <button class="toolbar-btn" id="undoBtn">â†¶ ì‹¤í–‰ì·¨ì†Œ</button>
                     <button class="toolbar-btn" id="redoBtn">â†· ë‹¤ì‹œì‹¤í–‰</button>
                 </div>
                 
                 <span class="toolbar-separator">|</span>
                 
                 <div class="toolbar-group">
                     <button class="toolbar-btn special" id="claimCheckBtn">âš–ï¸ ì²­êµ¬í•­ ì ê²€</button>
                     <button class="toolbar-btn warning" id="downloadBtn">ğŸ’¾ ë‹¤ìš´ë¡œë“œ</button>
                 </div>
             </div>
         </div>
         
         <!-- í…Œì´ë¸” ì˜ì—­ -->
         <div class="table-section">
             <div class="table-container" id="tableContainer">
                 <div class="empty-state" id="emptyState">
                     <div class="empty-icon">ğŸ“‹</div>
                     <div class="empty-title">ë¹„êµ í…Œì´ë¸”ì´ ìƒì„±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤</div>
                 </div>
             </div>
         </div>
     </div>
 </div>

 <!-- mammoth ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ -->
 <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
 <script src="amendment-checker.js"></script>

 <!-- í—¤ë” ë²„íŠ¼ ê¸°ëŠ¥ -->
 <script>
 document.addEventListener('DOMContentLoaded', function() {
     const toggleInputBtn = document.getElementById('toggleInputBtn');
     const logoutBtn = document.getElementById('logoutBtn');
     
     // ì ‘ê¸°/í¼ì¹˜ê¸° ë²„íŠ¼ ê¸°ëŠ¥
     if (toggleInputBtn) {
         toggleInputBtn.addEventListener('click', function() {
             const inputSection = document.getElementById('inputSection');
             const inputContent = document.getElementById('inputContent');
             
             if (inputContent && inputSection) {
                 const isCollapsed = inputContent.classList.contains('collapsed');
                 
                 if (isCollapsed) {
                     inputContent.classList.remove('collapsed');
                     inputSection.classList.remove('collapsed');
                     toggleInputBtn.textContent = 'ì ‘ê¸°';
                 } else {
                     inputContent.classList.add('collapsed');
                     inputSection.classList.add('collapsed');
                     toggleInputBtn.textContent = 'í¼ì¹˜ê¸°';
                 }
             }
         });
     }
     
     // ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ê¸°ëŠ¥
     if (logoutBtn) {
         logoutBtn.addEventListener('click', function() {
             if (confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                 if (typeof auth !== 'undefined' && auth) {
                     auth.signOut().then(() => {
                         console.log('SMARTPAT ë¡œê·¸ì•„ì›ƒ ì™„ë£Œ');
                         window.location.href = '/login.html';
                     }).catch((error) => {
                         console.error('ë¡œê·¸ì•„ì›ƒ ì˜¤ë¥˜:', error);
                         window.location.href = '/login.html';
                     });
                 } else {
                     window.location.href = '/login.html';
                 }
             }
         });
     }
 });
 </script>

 <!-- ë³´ì•ˆ ìŠ¤í¬ë¦½íŠ¸ -->
 <script>
 (function() {
     'use strict';
     
     // ìš°í´ë¦­ ë°©ì§€
     document.addEventListener('contextmenu', function(e) {
         e.preventDefault();
         e.stopPropagation();
         return false;
     });
     
     // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ë°©ì§€
     document.addEventListener('keydown', function(e) {
         // F12 ë°©ì§€
         if (e.key === 'F12' || e.keyCode === 123) {
             e.preventDefault();
             e.stopPropagation();
             return false;
         }
         
         // Ctrl + Shift + I (ê°œë°œìë„êµ¬) ë°©ì§€
         if (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.keyCode === 73)) {
             e.preventDefault();
             e.stopPropagation();
             return false;
         }
         
         // Ctrl + Shift + J (ì½˜ì†”) ë°©ì§€
         if (e.ctrlKey && e.shiftKey && (e.key === 'J' || e.keyCode === 74)) {
             e.preventDefault();
             e.stopPropagation();
             return false;
         }
         
         // Ctrl + Shift + C (ìš”ì†Œ ê²€ì‚¬) ë°©ì§€
         if (e.ctrlKey && e.shiftKey && (e.key === 'C' || e.keyCode === 67)) {
             e.preventDefault();
             e.stopPropagation();
             return false;
         }
         
         // Ctrl + U (ì†ŒìŠ¤ë³´ê¸°) ë°©ì§€
         if (e.ctrlKey && (e.key === 'U' || e.keyCode === 85)) {
             e.preventDefault();
             e.stopPropagation();
             return false;
         }
         
         // Ctrl + S (ì €ì¥) ë°©ì§€
         if (e.ctrlKey && (e.key === 'S' || e.keyCode === 83)) {
             e.preventDefault();
             e.stopPropagation();
             return false;
         }
     });
     
     // í…ìŠ¤íŠ¸ ì„ íƒ ë°©ì§€ (ì…ë ¥ ìš”ì†Œ ì œì™¸)
     document.addEventListener('selectstart', function(e) {
         if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
             return true;
         }
         e.preventDefault();
         return false;
     });
     
     // ë“œë˜ê·¸ ë°©ì§€
     document.addEventListener('dragstart', function(e) {
         e.preventDefault();
         return false;
     });
     
     // ê°œë°œìë„êµ¬ ê°ì§€
     let devtools = { opened: false, orientation: null };
     const threshold = 160;
     
     function detectDevTools() {
         if (window.outerHeight - window.innerHeight > threshold || 
             window.outerWidth - window.innerWidth > threshold) {
             if (!devtools.opened) {
                 devtools.opened = true;
                 console.clear();
                 console.log('%cSMARTPAT ê°œë°œìë„êµ¬ ì‚¬ìš©ì´ ì œí•œë˜ì–´ ìˆìŠµë‹ˆë‹¤.', 
                     'color: #1E3A8A; font-size: 20px; font-weight: bold;');
             }
         } else {
             devtools.opened = false;
         }
     }
     
     setInterval(detectDevTools, 500);
     
     // ì½˜ì†” ì°¨ë‹¨
     console.log = console.error = console.warn = function() { return; };
     
     // ë””ë²„ê±° ì°¨ë‹¨
     setInterval(function() { debugger; }, 1000);
     
     // iframe ì°¨ë‹¨
     if (window.self !== window.top) {
         window.top.location = window.self.location;
     }

     // CSS ë³´ì•ˆ
     const style = document.createElement('style');
     style.textContent = `
         * {
             -webkit-user-select: none !important;
             -moz-user-select: none !important;
             -ms-user-select: none !important;
             user-select: none !important;
         }
         
         input, textarea {
             -webkit-user-select: text !important;
             -moz-user-select: text !important;
             -ms-user-select: text !important;
             user-select: text !important;
         }
         
         @media print {
             * { display: none !important; }
             body::before {
                 content: "SMARTPAT ì¸ì‡„ê°€ ì œí•œë˜ì–´ ìˆìŠµë‹ˆë‹¤.";
                 display: block !important;
                 font-size: 24px;
                 text-align: center;
                 margin-top: 50px;
                 color: #1E3A8A;
                 font-weight: bold;
             }
         }
     `;
     document.head.appendChild(style);
 })();
 </script>

 <!-- UI ìƒíƒœ ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€ -->
 <script>
 // UI ìƒíƒœ ê´€ë¦¬ í•¨ìˆ˜ë“¤
 window.showWorkingInterface = function() {
     const toolbar = document.querySelector('.toolbar');
     const tableSection = document.querySelector('.table-section');
     
     if (toolbar) {
         toolbar.classList.add('show');
     }
     if (tableSection) {
         tableSection.classList.add('show');
     }
 };

 window.hideWorkingInterface = function() {
     const toolbar = document.querySelector('.toolbar');
     const tableSection = document.querySelector('.table-section');
     
     if (toolbar) {
         toolbar.classList.remove('show');
     }
     if (tableSection) {
         tableSection.classList.remove('show');
     }
 };
 </script>
</body>
</html>
